# –ê–ù–ê–õ–ò–ó –õ–û–ì–ò–ö–ò –î–ê–ù–ù–´–• –ò –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï –ü–û –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–£

**–î–∞—Ç–∞:** 2024  
**–°—Ç–∞—Ç—É—Å:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ

---

## üîç –ü–†–û–ë–õ–ï–ú–´ –¢–ï–ö–£–©–ï–ô –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### 1. –ü—Ä–æ–±–ª–µ–º–∞: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `index()` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö 4 –≤–∫–ª–∞–¥–æ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –î–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–ª —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –≤–∫–ª–∞–¥–∫—É, –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –≤ –ø–∞–º—è—Ç–∏
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä –∏–∑ –∫–æ–¥–∞:**
```python
# –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –í–°–ï –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É:
suppliers_with_requests = []  # –í—Å–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏
data_requests = DataRequest.query.order_by(...).all()  # –í–°–ï –∑–∞–ø—Ä–æ—Å—ã
processing_files = ImportHistory.query.filter_by(...).all()  # –í–°–ï —Ñ–∞–π–ª—ã
catalog_files = ImportHistory.query.filter_by(...).all()  # –í–°–ï —Ñ–∞–π–ª—ã
exported_files = ImportHistory.query.filter_by(...).all()  # –í–°–ï —Ñ–∞–π–ª—ã
all_products = Product.query.all()  # –í–°–ï —Ç–æ–≤–∞—Ä—ã!
all_subcategories = {...}  # –í–°–ï –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- ‚ùå –ù–µ–Ω—É–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- ‚ùå –°–ª–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

### 2. –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- –í—Å—è –ª–æ–≥–∏–∫–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `routes.py`
- –ù–µ—Ç —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü
- –°–º–µ—à–∞–Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```python
# –í routes.py —Å–º–µ—à–∞–Ω–æ:
# - –ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î
# - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤)
# - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
# - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚ùå –°–ª–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É
- ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

### 3. –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —à–∞–±–ª–æ–Ω—ã –∫–∞–∫ —Å—ã—Ä—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏–ª–∏ –ø—Ä–æ—Å—Ç—ã–µ —Å–ª–æ–≤–∞—Ä–∏
- –ù–µ—Ç —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–π –≤–∫–ª–∞–¥–∫–∏
- –®–∞–±–ª–æ–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–ü—Ä–∏–º–µ—Ä:**
```python
# –í routes.py:
suppliers_with_requests.append({
    'supplier': supplier,  # –°—ã—Ä–æ–π –æ–±—ä–µ–∫—Ç
    'stats': supplier_stats,  # –ü—Ä–æ—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å
    'overall_status': overall_status,  # –°—Ç—Ä–æ–∫–∞
})

# –í —à–∞–±–ª–æ–Ω–µ –ø–æ—Ç–æ–º:
{% if supplier.overall_status == 'has_data' %}  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ —à–∞–±–ª–æ–Ω–µ!
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ —à–∞–±–ª–æ–Ω–∞—Ö
- ‚ùå –°–ª–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### 4. –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç —Å–≤—è–∑–∏ —Å workflow

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- –î–∞–Ω–Ω—ã–µ –Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —ç—Ç–∞–ø–∞–º workflow
- –ù–µ—Ç —á–µ—Ç–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –∫–∞–∫–æ–º—É —ç—Ç–∞–ø—É
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ workflow
- ‚ùå –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –°–ª–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —ç—Ç–∞–ø—ã

---

## üéØ –ü–†–ï–î–õ–û–ñ–ï–ù–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —ç—Ç–∞–ø–∞–º workflow** - –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –∏–º–µ–µ—Ç —Å–≤–æ–π —Å–µ—Ä–≤–∏—Å
2. **Lazy loading** - –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏
3. **ViewModels/DTOs** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
4. **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π** - –≤—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
5. **API-first** - –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ API –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

---

## üìê –ù–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê

### 1. –°–µ—Ä–≤–∏—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ workflow

```
app/services/
‚îú‚îÄ‚îÄ workflow/
‚îÇ   ‚îú‚îÄ‚îÄ data_collection_service.py    # –≠—Ç–∞–ø 1: –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ processing_service.py         # –≠—Ç–∞–ø 2: –í –æ–±—Ä–∞–±–æ—Ç–∫–µ
‚îÇ   ‚îú‚îÄ‚îÄ catalog_service.py            # –≠—Ç–∞–ø 3: –í –∫–∞—Ç–∞–ª–æ–≥–µ
‚îÇ   ‚îî‚îÄ‚îÄ export_service.py             # –≠—Ç–∞–ø 4: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ
```

**–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:**
- –ó–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö —Å–≤–æ–µ–≥–æ —ç—Ç–∞–ø–∞
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É —ç—Ç–∞–ø–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –ø–æ–∏—Å–∫

### 2. ViewModels –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```
app/viewmodels/
‚îú‚îÄ‚îÄ data_collection_viewmodel.py
‚îú‚îÄ‚îÄ processing_viewmodel.py
‚îú‚îÄ‚îÄ catalog_viewmodel.py
‚îî‚îÄ‚îÄ export_viewmodel.py
```

**ViewModels —Å–æ–¥–µ—Ä–∂–∞—Ç:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
- –ú–µ—Ç–æ–¥—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### 3. API endpoints –¥–ª—è lazy loading

```
app/api/
‚îú‚îÄ‚îÄ workflow/
‚îÇ   ‚îú‚îÄ‚îÄ data_collection.py    # GET /api/workflow/data-collection
‚îÇ   ‚îú‚îÄ‚îÄ processing.py         # GET /api/workflow/processing
‚îÇ   ‚îú‚îÄ‚îÄ catalog.py            # GET /api/workflow/catalog
‚îÇ   ‚îî‚îÄ‚îÄ export.py             # GET /api/workflow/export
```

**API endpoints:**
- –ó–∞–≥—Ä—É–∂–∞—é—Ç –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—é
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON –¥–ª—è AJAX-–∑–∞–≥—Ä—É–∑–∫–∏

### 4. –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ routes

```python
@bp.route('/')
@login_required
def index():
    """–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω, –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API"""
    active_tab = request.args.get('tab', 'data_collection')
    return render_template('main/index.html', active_tab=active_tab)
```

---

## üîÑ –ù–û–í–´–ô FLOW –î–ê–ù–ù–´–•

### –¢–µ–∫—É—â–∏–π flow (–ø–ª–æ—Ö–æ–π):
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. routes.py –∑–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
3. –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —à–∞–±–ª–æ–Ω
4. –®–∞–±–ª–æ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–¥–∞–∂–µ –Ω–µ–≤–∏–¥–∏–º—ã–µ)
```

### –ù–æ–≤—ã–π flow (—Ö–æ—Ä–æ—à–∏–π):
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. routes.py –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω
3. JavaScript –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ —á–µ—Ä–µ–∑ API
4. –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∏–¥–∏–º–æ–π –≤–∫–ª–∞–¥–∫–∏
5. –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏ - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–∏
```

---

## üìã –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ (2 –¥–Ω—è)

**1.1. DataCollectionService**
```python
class DataCollectionService:
    @staticmethod
    def get_suppliers(filters=None, page=1, per_page=20):
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π"""
        
    @staticmethod
    def get_data_requests(filters=None, page=1, per_page=20):
        """–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–∞–Ω–Ω—ã—Ö"""
        
    @staticmethod
    def get_stats():
        """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —ç—Ç–∞–ø–∞"""
```

**1.2. ProcessingService**
```python
class ProcessingService:
    @staticmethod
    def get_files(filters=None, page=1, per_page=20):
        """–ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª—ã –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ"""
        
    @staticmethod
    def get_stats():
        """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —ç—Ç–∞–ø–∞"""
```

**1.3. CatalogService**
```python
class CatalogService:
    @staticmethod
    def get_imports(filters=None, page=1, per_page=20):
        """–ü–æ–ª—É—á–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ"""
        
    @staticmethod
    def get_stats():
        """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —ç—Ç–∞–ø–∞"""
```

**1.4. ExportService**
```python
class ExportService:
    @staticmethod
    def get_exports(filters=None, page=1, per_page=20):
        """–ü–æ–ª—É—á–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç—ã"""
        
    @staticmethod
    def get_stats():
        """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —ç—Ç–∞–ø–∞"""
```

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ ViewModels (1 –¥–µ–Ω—å)

**2.1. DataCollectionViewModel**
```python
class DataCollectionViewModel:
    def __init__(self, suppliers, requests, stats):
        self.suppliers = [SupplierViewModel(s) for s in suppliers]
        self.requests = [DataRequestViewModel(r) for r in requests]
        self.stats = stats
        
    def to_dict(self):
        """–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è JSON"""
```

**2.2. SupplierViewModel**
```python
class SupplierViewModel:
    def __init__(self, supplier, stats):
        self.id = supplier.id
        self.code = supplier.code
        self.name = supplier.name
        self.status = self._determine_status(stats)  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∑–¥–µ—Å—å
        self.categories = [c.name for c in supplier.categories]
        
    def _determine_status(self, stats):
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞"""
        if stats['data_received'] > 0:
            return 'has_data'
        # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
```

### –≠—Ç–∞–ø 3: –°–æ–∑–¥–∞–Ω–∏–µ API endpoints (2 –¥–Ω—è)

**3.1. API –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞**
```python
@bp.route('/api/workflow/data-collection', methods=['GET'])
@login_required
def api_data_collection():
    """API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —ç—Ç–∞–ø–∞ '–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö'"""
    filters = {
        'supplier_status': request.args.get('supplier_status'),
        'request_status': request.args.get('request_status'),
        'search': request.args.get('search'),
    }
    page = request.args.get('page', 1, type=int)
    per_page = request.args.get('per_page', 20, type=int)
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ—Ä–≤–∏—Å
    suppliers = DataCollectionService.get_suppliers(filters, page, per_page)
    requests = DataCollectionService.get_data_requests(filters, page, per_page)
    stats = DataCollectionService.get_stats()
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º ViewModel
    viewmodel = DataCollectionViewModel(suppliers, requests, stats)
    
    return jsonify(viewmodel.to_dict())
```

### –≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ frontend (2 –¥–Ω—è)

**4.1. JavaScript –¥–ª—è lazy loading**
```javascript
// –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    const activeTab = getActiveTab();
    loadTabData(activeTab);
});

// –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏
document.querySelectorAll('[data-bs-toggle="tab"]').forEach(tab => {
    tab.addEventListener('shown.bs.tab', function(event) {
        const tabId = event.target.getAttribute('data-bs-target');
        loadTabData(tabId);
    });
});

function loadTabData(tabId) {
    const endpoint = getEndpointForTab(tabId);
    fetch(endpoint)
        .then(response => response.json())
        .then(data => {
            renderTabContent(tabId, data);
        });
}
```

### –≠—Ç–∞–ø 5: –£–ø—Ä–æ—â–µ–Ω–∏–µ routes (1 –¥–µ–Ω—å)

**5.1. –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π index()**
```python
@bp.route('/')
@bp.route('/index')
@login_required
def index():
    """–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω"""
    active_tab = request.args.get('tab', 'data_collection')
    return render_template('main/index.html', active_tab=active_tab)
```

---

## ‚úÖ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ù–û–í–û–ô –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 2. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —ç—Ç–∞–ø—ã workflow
- ‚úÖ –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

### 3. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –õ–µ–≥–∫–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É

### 4. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¢–ó
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —ç—Ç–∞–ø–∞–º workflow
- ‚úÖ –ß–µ—Ç–∫–∞—è —Å–≤—è–∑—å —Å –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –¥–∞–Ω–Ω—ã—Ö

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–û–±—Å—É–¥–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ** —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
2. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã** - —á—Ç–æ –¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å
3. **–ù–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é** —Å —Å–∞–º–æ–≥–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ —ç—Ç–∞–ø–∞
4. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** - –Ω–µ –ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024  
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∫ –æ–±—Å—É–∂–¥–µ–Ω–∏—é

