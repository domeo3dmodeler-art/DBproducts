# UX/UI ДИЗАЙН: ВКЛАДКА "СБОР ДАННЫХ"

**Дата:** 2024  
**Версия:** 1.0

---

## 1. КОНЦЕПЦИЯ

### 1.1. Назначение вкладки

Вкладка **"Сбор данных"** - это центральный хаб для управления процессом получения данных от поставщиков. Здесь происходит:
- Регистрация новых поставщиков
- Привязка поставщиков к категориям товаров
- Отправка запросов данных
- Отслеживание получения информации

### 1.2. Принципы дизайна

- **Все в одном месте** - не нужно переходить между разделами
- **Быстрые действия** - создание поставщика и отправка запроса за 2-3 клика
- **Визуальная ясность** - понятные статусы и индикаторы
- **Контекстная информация** - видно все связанные данные

---

## 2. СТРУКТУРА ВКЛАДКИ

### 2.1. Макет страницы

```
┌─────────────────────────────────────────────────────────────────┐
│  ЗАГОЛОВОК                                                      │
│  Сбор данных                                                    │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  СТАТИСТИКА (4 карточки)                                       │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐         │
│  │Поставщики│ │Запросы   │ │Получено  │ │Ожидают   │         │
│  │   12     │ │   8      │ │   5      │ │   3      │         │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘         │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  БЫСТРЫЕ ДЕЙСТВИЯ                                               │
│  [➕ Создать поставщика] [📤 Отправить запрос] [📥 Скачать шаблон]│
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  ТАБЫ: [Поставщики] [Запросы данных]                            │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  СОДЕРЖИМОЕ АКТИВНОЙ ВКЛАДКИ                                    │
│  (Поставщики или Запросы данных)                                │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2. Карточки статистики

**Дизайн:**
- Минималистичные карточки с иконками
- Большие числа для быстрого восприятия
- Кликабельные для перехода к фильтрованному списку

**Метрики:**
1. **Поставщики** - общее количество активных поставщиков
2. **Запросы** - количество активных запросов (request_sent)
3. **Получено** - количество запросов со статусом data_received
4. **Ожидают** - количество запросов без ответа (no_response или просроченные)

---

## 3. РАЗДЕЛ "ПОСТАВЩИКИ"

### 3.1. Структура

```
┌─────────────────────────────────────────────────────────────────┐
│  ПОСТАВЩИКИ                                                     │
│  [🔍 Поиск...] [Фильтр: Все категории ▼] [Фильтр: Все статусы ▼]│
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  ТАБЛИЦА ПОСТАВЩИКОВ                                            │
│  ┌──────┬──────────────┬───────────┬──────────┬─────────┬────┐│
│  │ Код  │ Название     │ Категории │ Запросы  │ Статус  │ ...││
│  ├──────┼──────────────┼───────────┼──────────┼─────────┼────┤│
│  │SUP001│ ООО Акваме   │ Сантехника│ 3 (2)    │ 🟢      │ ...││
│  │      │              │ Электро...│          │         │    ││
│  ├──────┼──────────────┼───────────┼──────────┼─────────┼────┤│
│  │SUP002│ Торговый дом │ Сантехника│ 1 (0)    │ 🟡      │ ...││
│  └──────┴──────────────┴───────────┴──────────┴─────────┴────┘│
└─────────────────────────────────────────────────────────────────┘
```

### 3.2. Колонки таблицы

| Колонка | Описание | Формат |
|---------|----------|--------|
| **Код** | Код поставщика | `SUP001` (моноширинный) |
| **Название** | Название поставщика | Жирный шрифт |
| **Категории** | Привязанные категории | Бейджи (макс 3, затем "+N") |
| **Запросы** | Статистика запросов | "Всего (активных)" |
| **Статус** | Общий статус | Индикатор (🟢🟡🔴⚪) |
| **Действия** | Кнопки действий | Иконки |

### 3.3. Индикаторы статуса

**Логика определения статуса:**
- 🟢 **Есть данные** - есть запросы со статусом `data_received`
- 🟡 **Ожидают ответа** - есть запросы со статусом `request_sent`
- 🔴 **Нет ответа** - есть запросы со статусом `no_response` или просроченные
- ⚪ **Новый** - нет запросов или только `new`

**Визуализация:**
- Цветной индикатор (круг) в колонке "Статус"
- Tooltip при наведении с детальной информацией

### 3.4. Действия для поставщика

**Кнопки в колонке "Действия":**
- 📤 **Отправить запрос** - открывает модальное окно
- 📥 **Скачать шаблон** - скачивает шаблон для категории
- ✏️ **Редактировать** - переход на страницу редактирования
- 👁️ **Просмотреть** - просмотр деталей и запросов

**Контекстное меню (опционально):**
- Правый клик на строке → меню с действиями

### 3.5. Фильтры

**Доступные фильтры:**
- По категориям (множественный выбор)
- По статусу запросов
- По наличию данных
- По дате создания

**Поиск:**
- По названию поставщика
- По коду
- По email

---

## 4. РАЗДЕЛ "ЗАПРОСЫ ДАННЫХ"

### 4.1. Структура

```
┌─────────────────────────────────────────────────────────────────┐
│  ЗАПРОСЫ ДАННЫХ                                                 │
│  [🔍 Поиск...] [Фильтр: Все статусы ▼] [Фильтр: Все категории ▼]│
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  ТАБЛИЦА ЗАПРОСОВ                                               │
│  ┌──────────┬───────────┬──────────────┬─────────┬─────────┬──┐│
│  │Поставщик │ Категория │ Подкатегории │ Статус  │ Срок    │..││
│  ├──────────┼───────────┼──────────────┼─────────┼─────────┼──┤│
│  │ООО Акваме│ Сантехника│ Смесители    │ Отправлен│ 15.01  │..││
│  │          │           │ Раковины     │         │         │  ││
│  ├──────────┼───────────┼──────────────┼─────────┼─────────┼──┤│
│  │Торговый  │ Сантехника│ Смесители    │ Получено│ 10.01  │..││
│  │дом       │           │              │         │         │  ││
│  └──────────┴───────────┴──────────────┴─────────┴─────────┴──┘│
└─────────────────────────────────────────────────────────────────┘
```

### 4.2. Колонки таблицы

| Колонка | Описание | Формат |
|---------|----------|--------|
| **Поставщик** | Название поставщика | Ссылка на детали |
| **Категория** | Категория запроса | Название категории |
| **Подкатегории** | Список подкатегорий | Список через запятую (макс 2, затем "+N") |
| **Статус** | Статус запроса | Badge с цветом |
| **Срок** | Deadline | Дата (красный если просрочен) |
| **Отправлен** | Дата отправки | Дата |
| **Получено** | Дата получения | Дата (если есть) |
| **Действия** | Кнопки действий | Иконки |

### 4.3. Badges статусов

**Цветовая схема:**
- `new` - Серый (gray) - "Новый"
- `request_sent` - Синий (blue) - "Отправлен"
- `data_received` - Зеленый (green) - "Получено"
- `no_response` - Красный (red) - "Нет ответа"
- `cancelled` - Серый (gray) - "Отменен"

**Визуализация:**
- Округлые бейджи с текстом
- Иконка статуса (опционально)

### 4.4. Индикация сроков

**Логика:**
- **Просрочен** - красный цвет, иконка ⚠️
- **Сегодня** - оранжевый цвет, иконка ⏰
- **Будущие** - обычный цвет

**Визуализация:**
- Цвет текста даты
- Иконка рядом с датой (для просроченных)

### 4.5. Действия для запроса

**Кнопки в колонке "Действия":**
- 📥 **Отметить получено** - для статуса `request_sent`
- 👁️ **Просмотреть** - детали запроса
- ✏️ **Редактировать** - изменить срок, сообщение
- ❌ **Отменить** - отменить запрос
- 📤 **Повторить** - для статуса `no_response` или `cancelled`

---

## 5. МОДАЛЬНЫЕ ОКНА

### 5.1. "Отправить запрос"

**Структура:**
```
┌─────────────────────────────────────────────────────────┐
│  Отправить запрос данных                    [×]         │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  Поставщик *                                            │
│  [Выберите поставщика ▼]                                │
│                                                          │
│  Категория *                                            │
│  [Выберите категорию ▼]                                 │
│                                                          │
│  Подкатегории *                                         │
│  ☑ Смесители                                            │
│  ☑ Раковины                                             │
│  ☐ Ванны                                                │
│  ☐ Унитазы                                              │
│                                                          │
│  Срок получения *                                       │
│  [📅 15.01.2024]                                        │
│                                                          │
│  Сообщение (опционально)                                │
│  [Текст запроса...]                                     │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ ℹ️ Будет автоматически сгенерирован шаблон для    │ │
│  │    выбранных подкатегорий                           │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  [Отмена]                    [📤 Отправить запрос]      │
└─────────────────────────────────────────────────────────┘
```

**Валидация:**
- Поставщик обязателен
- Категория обязательна
- Хотя бы одна подкатегория обязательна
- Срок обязателен и должен быть в будущем

**Автоматические действия:**
- При выборе категории загружаются доступные подкатегории
- При отправке генерируется шаблон (если нужно)
- Создается запись DataRequest со статусом `request_sent`

### 5.2. "Отметить получено"

**Структура:**
```
┌─────────────────────────────────────────────────────────┐
│  Отметить получение данных                  [×]         │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  Запрос: #123 - ООО Акваме / Сантехника                 │
│  Подкатегории: Смесители, Раковины                      │
│                                                          │
│  Файл *                                                 │
│  [📁 Выбрать файл] или перетащите файл сюда            │
│                                                          │
│  Дата получения                                         │
│  [📅 15.01.2024] (автоматически = сегодня)              │
│                                                          │
│  Комментарий (опционально)                              │
│  [Комментарий...]                                       │
│                                                          │
│  ☑ Автоматически импортировать после загрузки           │
│                                                          │
│  [Отмена]              [📥 Загрузить и отметить]       │
└─────────────────────────────────────────────────────────┘
```

**Функционал:**
- Drag & drop для загрузки файла
- Автоматическое определение формата
- Опция автоматического импорта
- Валидация файла перед загрузкой

**Автоматические действия:**
- Создание ImportHistory
- Связывание с DataRequest
- Обновление статуса запроса на `data_received`
- Автоматический импорт (если выбрано)

### 5.3. "Создать поставщика" (быстрое создание)

**Структура:**
```
┌─────────────────────────────────────────────────────────┐
│  Создать поставщика                          [×]         │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  Код                                                     │
│  [SUP003] (автоматически)                                │
│                                                          │
│  Название *                                              │
│  [Название поставщика]                                   │
│                                                          │
│  Категории *                                             │
│  ☑ Сантехника                                            │
│  ☑ Электроника                                           │
│  ☐ Мебель                                                │
│                                                          │
│  Контактное лицо                                         │
│  [Имя]                                                   │
│                                                          │
│  Email                                                   │
│  [email@example.com]                                     │
│                                                          │
│  Телефон                                                 │
│  [+7 (999) 123-45-67]                                    │
│                                                          │
│  ☑ Отправить запрос данных сразу после создания         │
│                                                          │
│  [Отмена]                    [💾 Создать поставщика]    │
└─────────────────────────────────────────────────────────┘
```

**Особенности:**
- Минимальный набор полей для быстрого создания
- Возможность сразу отправить запрос
- Автоматическая генерация кода

---

## 6. ИНТЕРАКТИВНОСТЬ

### 6.1. Переключение между разделами

**Табы:**
- "Поставщики" - активный раздел
- "Запросы данных" - второй раздел

**Переключение:**
- Клик по табу
- Сохранение фильтров при переключении
- URL параметры для прямых ссылок

### 6.2. Поиск и фильтры

**Поиск:**
- В реальном времени (debounce 300ms)
- Поиск по всем релевантным полям
- Подсветка совпадений

**Фильтры:**
- Множественный выбор
- Сохранение в URL
- Сброс фильтров одной кнопкой

### 6.3. Сортировка

**Доступная сортировка:**
- По дате создания (по умолчанию)
- По названию
- По статусу
- По сроку (для запросов)

**Индикация:**
- Стрелки в заголовках колонок
- Активная колонка выделена

### 6.4. Массовые операции

**Для поставщиков:**
- Выбор нескольких поставщиков (чекбоксы)
- Массовая отправка запросов
- Массовое скачивание шаблонов

**Для запросов:**
- Выбор нескольких запросов
- Массовое обновление статусов
- Массовая отмена

---

## 7. АДАПТИВНОСТЬ

### 7.1. Десктоп (1920px+)

- Полная таблица со всеми колонками
- Боковая панель с фильтрами (опционально)
- Модальные окна в центре экрана

### 7.2. Планшет (768px+)

- Адаптивная таблица (скрытие некоторых колонок)
- Фильтры в выпадающем меню
- Модальные окна на всю ширину

### 7.3. Мобильный (320px+)

- Карточки вместо таблицы
- Фильтры в модальном окне
- Полноэкранные модальные окна

---

## 8. МИКРОИНТЕРАКЦИИ

### 8.1. Анимации

- Плавное появление модальных окон (fade + slide)
- Плавное переключение табов
- Hover эффекты на строках таблицы
- Loading состояния при загрузке

### 8.2. Обратная связь

- Toast уведомления при действиях
- Подтверждение для опасных действий
- Прогресс-бары для длительных операций
- Валидация форм в реальном времени

### 8.3. Состояния

- Empty state (нет данных)
- Loading state (загрузка)
- Error state (ошибка)
- Success state (успех)

---

## 9. ДОСТУПНОСТЬ

### 9.1. Клавиатурная навигация

- Tab для перехода между элементами
- Enter для активации
- Escape для закрытия модальных окон
- Стрелки для навигации в таблице

### 9.2. Screen readers

- ARIA labels для всех интерактивных элементов
- Описания для иконок
- Логическая структура заголовков

### 9.3. Цветовой контраст

- Минимум 4.5:1 для текста
- Не только цвет для передачи информации
- Альтернативные индикаторы (иконки, текст)

---

## 10. ПРИМЕРЫ ЭКРАНОВ

### 10.1. Пустое состояние

```
┌─────────────────────────────────────────────────────────┐
│  📭 Нет поставщиков                                     │
│                                                          │
│  Начните с создания первого поставщика                  │
│                                                          │
│  [➕ Создать поставщика]                                │
└─────────────────────────────────────────────────────────┘
```

### 10.2. Состояние загрузки

```
┌─────────────────────────────────────────────────────────┐
│  ⏳ Загрузка данных...                                   │
│                                                          │
│  [Skeleton screens для таблицы]                        │
└─────────────────────────────────────────────────────────┘
```

### 10.3. Успешное действие

```
┌─────────────────────────────────────────────────────────┐
│  ✅ Запрос успешно отправлен                            │
│                                                          │
│  Запрос #123 отправлен поставщику "ООО Акваме"         │
│  Шаблон сгенерирован и готов к отправке                 │
│                                                          │
│  [Просмотреть запрос] [Закрыть]                         │
└─────────────────────────────────────────────────────────┘
```

---

**Дата создания:** 2024  
**Версия:** 1.0  
**Статус:** Готово к реализации

