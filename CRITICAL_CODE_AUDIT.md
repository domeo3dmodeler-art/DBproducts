# –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–£–î–ò–¢ –ö–û–î–ê

## –î–∞—Ç–∞: 2024-12-19

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. –û—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥ –≤ production
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ `print()` –∏ `console.log()` –≤ –∫–æ–¥–µ
- **–§–∞–π–ª—ã**: 
  - `app/main/routes.py` - 12+ print statements
  - `app/services/attribute_preview_service.py` - 10+ print statements
  - `app/services/attribute_import_service.py` - 8+ print statements
  - `app/services/clipboard_attribute_service.py` - 5+ print statements
  - `app/templates/main/import_attributes.html` - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ console.log
- **–†–∏—Å–∫**: –£—Ç–µ—á–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∑–∞—Å–æ—Ä–µ–Ω–∏–µ –ª–æ–≥–æ–≤, —Å–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–†–µ—à–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `current_app.logger` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π DEBUG —Ä–µ–∂–∏–º–∞

### 2. N+1 –ø—Ä–æ–±–ª–µ–º—ã –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ –ë–î
- **–ü—Ä–æ–±–ª–µ–º–∞**: –í `app/main/routes.py:index()` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∑–∞—Ç–µ–º –¥–ª—è –∫–∞–∂–¥–æ–π –¥–µ–ª–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **–ü—Ä–∏–º–µ—Ä**: 
  ```python
  for category in ProductCategory.query.filter_by(is_active=True).all():
      products_in_category = Product.query.join(Subcategory).filter(...).all()  # N+1!
  ```
- **–†–∏—Å–∫**: –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `joinedload` –∏–ª–∏ `selectinload` –¥–ª—è eager loading

### 3. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.all()` –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- **–§–∞–π–ª—ã**: `app/main/routes.py`, `app/api/routes.py`
- **–†–∏—Å–∫**: –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–∞—Ö –¥–∞–Ω–Ω—ã—Ö
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –≤–µ–∑–¥–µ, –≥–¥–µ –Ω—É–∂–Ω–æ

### 4. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –≤ API routes
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏-—Ö–µ–ª–ø–µ—Ä—ã

### 5. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –≤—Å–µ API endpoints –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–†–∏—Å–∫**: SQL injection, XSS, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å marshmallow —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## ‚ö†Ô∏è –°–ï–†–¨–ï–ó–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `except:` –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **–†–∏—Å–∫**: –°–∫—Ä—ã—Ç–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- **–†–µ—à–µ–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### 7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ü—Ä–æ–±–ª–µ–º–∞**: CSRF –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è auth blueprint (–≤—Ä–µ–º–µ–Ω–Ω–æ)
- **–†–∏—Å–∫**: –£—è–∑–≤–∏–º–æ—Å—Ç—å –∫ CSRF –∞—Ç–∞–∫–∞–º
- **–†–µ—à–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É CSRF —Å React frontend

### 8. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `current_app.logger`

## üìã –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

1. ‚úÖ –£–¥–∞–ª–∏—Ç—å –≤—Å–µ print() –∏ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - **–í–´–ü–û–õ–ù–ï–ù–û**
2. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î (—É—Å—Ç—Ä–∞–Ω–∏—Ç—å N+1) - **–í–´–ü–û–õ–ù–ï–ù–û**
3. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –≤–µ–∑–¥–µ, –≥–¥–µ –Ω—É–∂–Ω–æ - **–ß–ê–°–¢–ò–ß–ù–û** (–µ—Å—Ç—å –≤ API, –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Å—Ç–∞)
4. ‚úÖ –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ - **–í–´–ü–û–õ–ù–ï–ù–û**
5. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö - **–¢–†–ï–ë–£–ï–¢–°–Ø** (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å marshmallow)
6. ‚ö†Ô∏è –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ - **–¢–†–ï–ë–£–ï–¢–°–Ø** (—Å–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã)

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –£–¥–∞–ª–µ–Ω –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥
- –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `print()` –Ω–∞ `current_app.logger` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π DEBUG —Ä–µ–∂–∏–º–∞
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ñ–∞–π–ª–∞—Ö:
  - `app/main/routes.py` - 17 –∑–∞–º–µ–Ω
  - `app/services/attribute_preview_service.py` - 10 –∑–∞–º–µ–Ω
  - `app/services/attribute_import_service.py` - 8 –∑–∞–º–µ–Ω
  - `app/services/clipboard_attribute_service.py` - 5 –∑–∞–º–µ–Ω
  - `app/services/media_service.py` - 1 –∑–∞–º–µ–Ω–∞
  - `app/import_data/routes.py` - 2 –∑–∞–º–µ–Ω—ã

### 2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ N+1 –ø—Ä–æ–±–ª–µ–º–∞ –≤ `app/main/routes.py:index()`
- –î–æ–±–∞–≤–ª–µ–Ω eager loading —Å `joinedload` –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–π –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
- –°–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

### 3. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `current_app.logger.error()` —Å `exc_info=True`
- –£–±—Ä–∞–Ω—ã –ø—É—Å—Ç—ã–µ `except:` –±–ª–æ–∫–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## ‚ö†Ô∏è –û–°–¢–ê–í–®–ò–ï–°–Ø –ó–ê–î–ê–ß–ò

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å marshmallow –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ API endpoints
- **–§–∞–π–ª—ã**: `app/api/routes.py`

### 2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°—Ä–µ–¥–Ω–∏–π
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- **–§–∞–π–ª—ã**: `app/api/routes.py`, `app/main/routes.py`

### 3. –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°—Ä–µ–¥–Ω–∏–π
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `.all()` –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- **–§–∞–π–ª—ã**: `app/main/routes.py` (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Å—Ç–∞)

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π
- **–†–µ—à–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É CSRF —Å React frontend
- **–§–∞–π–ª—ã**: `app/auth/routes.py`, `app/__init__.py`

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤**: 6
- **–ó–∞–º–µ–Ω–µ–Ω–æ print()**: 43
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤**: 1 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è N+1 –ø—Ä–æ–±–ª–µ–º–∞
- **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –≤–æ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö

