# –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## üéØ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (5 –º–∏–Ω—É—Ç)

1. **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env`** (–Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`):
```bash
cp .env.example .env
```

2. **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å SECRET_KEY**:
```python
import secrets
print(secrets.token_hex(32))
```

3. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å `.env`**:
```env
SECRET_KEY=<—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π-–∫–ª—é—á>
DATABASE_URL=postgresql://user:password@localhost/dbname
FLASK_ENV=production
DEBUG=False
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (2 –º–∏–Ω—É—Ç—ã)

–ò–∑–º–µ–Ω–∏—Ç—å `run.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```python
import os
from app import create_app
from config import config

config_name = os.environ.get('FLASK_ENV', 'development')
app = create_app(config[config_name])

if __name__ == '__main__':
    app.run()
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL (10 –º–∏–Ω—É—Ç)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL
2. –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
3. –û–±–Ω–æ–≤–∏—Ç—å `DATABASE_URL` –≤ `.env`
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
flask db upgrade
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (5 –º–∏–Ω—É—Ç)

–î–æ–±–∞–≤–∏—Ç—å –≤ `app/__init__.py`:
```python
import logging
from logging.handlers import RotatingFileHandler

if not app.debug:
    if not os.path.exists('logs'):
        os.mkdir('logs')
    file_handler = RotatingFileHandler('logs/app.log', maxBytes=10240, backupCount=10)
    file_handler.setFormatter(logging.Formatter(
        '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'
    ))
    file_handler.setLevel(logging.INFO)
    app.logger.addHandler(file_handler)
    app.logger.setLevel(logging.INFO)
    app.logger.info('Application startup')
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (10 –º–∏–Ω—É—Ç)

–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `backup.py`:
```python
import os
import subprocess
from datetime import datetime
from pathlib import Path

def backup_database():
    """–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    db_url = os.environ.get('DATABASE_URL', '')
    if 'postgresql' in db_url:
        # PostgreSQL backup
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        backup_file = f'backups/db_backup_{timestamp}.sql'
        Path('backups').mkdir(exist_ok=True)
        # pg_dump –∫–æ–º–∞–Ω–¥–∞
        subprocess.run(['pg_dump', db_url, '-f', backup_file])
    else:
        # SQLite backup
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        backup_file = f'backups/db_backup_{timestamp}.db'
        Path('backups').mkdir(exist_ok=True)
        import shutil
        shutil.copy('app.db', backup_file)
```

## üìã –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –°–æ–∑–¥–∞–Ω `.env` —Ñ–∞–π–ª —Å SECRET_KEY
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω PostgreSQL
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `run.py` –¥–ª—è production
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∑–∞–ø—É—Å–∫ –≤ production —Ä–µ–∂–∏–º–µ

## üöÄ –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤

–°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ!

–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (Nginx)
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WSGI —Å–µ—Ä–≤–µ—Ä–∞ (Gunicorn)
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL
4. –î–µ–ø–ª–æ–π

